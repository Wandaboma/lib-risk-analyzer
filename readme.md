#  Rust 生态系统三方库风险评估

本仓库公开了我们关于 **Rust 第三方库多维度风险识别方法** 的研究实现，包括依赖结构关键性评估、维护质量评估、功能可替代性度量等核心模块，同时提供完整的评估数据集与结果。


## 📌 项目简介

本研究提出一种综合考虑结构关键性、行为活跃度和语义可替代性的三维评估框架，用于识别供应链中具有潜在高风险的三方依赖库，主要包括以下内容：

- **依赖结构关键性分析**
- **维护质量预测**
- **功能可替代性度量**

我们在超过 30,000 个 Rust 三方库中开展实证研究，评估模型性能并发布高风险库排序结果。

## 🚀 如何运行

* 方式一：使用 Jupyter Notebook 查看可视化分析结果	

```
jupyter notebook src/risk_analysis_summary.ipynb
```

* 方式二：命令行一键运行

  确保你已经下载好 Crates.io Dump 数据文件 并按以下方式放置：

  ```
  /data/
  ├── crates.csv
  ├── versions.csv
  ├── dependencies.csv
  ```

  然后运行：

  ```
  bash run.sh
  ```

  脚本会自动执行全部分析过程，并输出关键结果与验证统计。

## 📊 高风险Rust Crates三方库

| crate_name  | crate_id | 维护质量  | 可替代性  | 结构关键性 | final_score | rank |
| ----------- | -------- | --------- | --------- | ---------- | ----------- | ---- |
| proc-macro2 | 22124    | 0.724761  | 1.32034   | 136.557    | 68.1778     | 1    |
| quote       | 6224     | -0.514472 | 2.31042   | 68.1544    | 33.7045     | 2    |
| syn         | 6274     | -0.251605 | 2.87225   | 51.8096    | 25.2811     | 3    |
| thiserror   | 171267   | 1.77623   | 2.01978   | 39.9017    | 19.4653     | 4    |
| anyhow      | 170198   | 0.649656  | 2.20022   | 25.9234    | 12.5166     | 5    |
| once_cell   | 77028    | 0.461894  | 0.217739  | 22.3865    | 11.56       | 6    |
| bytes       | 1315     | -0.1765   | 1.07861   | 22.6231    | 11.3978     | 7    |
| chrono      | 120      | -0.161473 | 1.97137   | 22.7463    | 11.0684     | 8    |
| memchr      | 2364     | 1.55992   | 0.390459  | 15.0066    | 7.69201     | 9    |
| bitflags    | 793      | -0.1765   | 2.04362   | 14.4486    | 6.92448     | 10   |
| textwrap    | 7649     | 1.81378   | 0.0218226 | 10.2387    | 5.42927     | 11   |
| url         | 109      | 1.88889   | 0.551179  | 9.35064    | 4.76596     | 12   |
| smallvec    | 1783     | 0.612104  | 0.927622  | 8.99951    | 4.5675      | 13   |
| base64      | 3569     | -0.32671  | 2.11187   | 8.22866    | 3.80225     | 14   |
| hex         | 3290     | -0.77734  | 0.478232  | 6.14498    | 3.45893     | 15   |
| defmt       | 276519   | 0.386788  | -0.202656 | 4.90606    | 2.99541     | 16   |
| image       | 136      | 1.43826   | 1.00803   | 5.34       | 2.62296     | 17   |
| http        | 184      | 0.311683  | 1.11465   | 5.16395    | 2.60494     | 18   |
| colored     | 4445     | 0.574551  | 3.26048   | 6.48508    | 2.38089     | 19   |
| crossterm   | 47345    | -0.063842 | 0.756844  | 3.89249    | 2.14989     | 20   |

此表为风险排序前 20 名的 Rust 第三方库，涵盖各自的维护质量、可替代性、结构关键性评分以及最终计算得到的综合风险评分（final_score），可用于优先识别、替换评估及依赖风险预警场景中。

## 📂 项目结构
  ```
RISK_ANALYSIS/
├── data/                            # 数据文件夹，包含所有原始与中间处理数据
│   ├── advisory-db-osv/            # 来自 OSV 的漏洞库数据
│   │   ├── crates/                 # 每个库的 JSON 格式漏洞报告
│   │   └── README.md               # 数据说明文档
│   ├── dependency_graph.pkl        # Rust 生态的依赖图（Pickle 格式）
│   ├── deprecated_message.json     # 提取的弃用提示信息
│   ├── maintenance_activity.csv    # 三方库维护行为评分结果
│   ├── osv_vulnerabilities.csv     # 漏洞元数据汇总
│   ├── package_substitutability.csv # 替代性语义相似度得分
│   ├── replacement-pairs.json      # 文本信息中明确的替代库对
│   ├── rust_22_24.csv              # 实验用子集数据（2022-2024）
│   ├── rust_22_25.csv              # 实验用子集数据（2022-2025）
│   ├── rust_25.csv                 # 实验用子集数据（2025）
│   ├── structure_criticality.csv   # 结构关键性评分
│   └── training_data_with_updated_label.csv  # 标签训练集（维护活跃度）
│
├── src/                            # 源代码文件夹，包含各分析模块
│   ├── activity_eval.py            # 对维护活跃度指标评估与训练
│   ├── keynode_eval.py             # 对结构关键性指标评估与分析
│   ├── replacement_eval.py         # 替代性评估匹配与验证
│   ├── risk_eval.py                # 综合风险指标计算与排序
│   ├── risk_analysis_summary.ipynb # 所有实验分析的 Jupyter Notebook 总结
│   └── replacement_embedding/      # 替代性嵌入模型计算与工具模块
│
├── run.sh                          # 运行脚本（可执行全流程）
├── readme.md                       # 项目介绍文档
  ```

## 📦 数据来源

- Rust 生态：Crates.io 元数据 + GitHub 仓库信息
- 行为特征：由 [OSS Compass](https://oss-compass.org/) 抽取并整理
- 漏洞信息：公开 Rust 漏洞列表，来自 [OSV 数据库](https://osv.dev/)

> 说明：本项目共收录约 30,935 个有效仓库，详见 `data/` 目录。

## 💬 反馈与合作

我们欢迎来自学术界、工业界与开源社区的合作与反馈。如有建议或希望贡献代码，请通过 [GitHub Issues](https://github.com/Wandaboma/lib-risk-analyzer/issues) 留言或提交 PR。

